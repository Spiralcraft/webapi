<!DOCTYPE html>
<html>

  <head>
    <script src="/js/spiralcraft-jsclient/spiralcraft.js">
    </script>
    <script src="apiClient.js">
    </script>
    <script lang="javascript">
      SPIRALCRAFT.start();
    </script>
  </head>
  <body>
    <ul data-sc-context="test-list">
      <li><Input type="text" data-sc-bind='this.element().scnid'/></li>
      <li><Input type="text" data-sc-bind='this.element().scnid'/></li>
      
      <li data-sc-context="test-item">
        <script type="sc-context">
          SPIRALCRAFT.api.post(
            "echo"
            ,function(r) { this.data=r; this.dataChanged(); }.bind(this)
            ,"Echo worked!"
            );
        </script>
        <Input type="text" data-sc-bind='this.context("test-item").data'
          data-sc-bind-setter="alert(value)"
        />
      </li>
      <li data-sc-context="test-item">
        <script type="sc-context">
          SPIRALCRAFT.api.post(
            "echo"
            ,function(r) { this.data=r; this.dataChanged(); }.bind(this)
            ,"Echo worked!"
            );
        </script>
        <div data-sc-bind='this.context("test-item").data'>
        </div>
          
        
      </li>
      <li data-sc-context="test-item">
        <script type="sc-context">
          SPIRALCRAFT.api.postJSON(
            "echoJSON"
            ,function(r) { this.data=r; this.dataChanged(); }.bind(this)
            ,{ field1: "value1"
              , field2: 2002
              , field3: false
              , field4: { f41:"subobj", f42:42 }
              , field5: ["hello","goodbye"]
              , field6: [1,2,3,4,5]
             }
            );
        </script>
        JSON Echo:
        <ul>
          <li>
            Field1: 
              <label data-sc-bind='this.context("test-item").data.field1'>
              </label>
          </li>
          <li>
		        Field2: 
		          <label data-sc-bind='this.context("test-item").data.field2'>
		          </label>
		      </li>
		      <li>
		        Field3: 
		          <label data-sc-bind='this.context("test-item").data.field3'>
		          </label>
		      </li>
        </ul>
          
        
      </li>
    
    </ul>
  </body>
  
</html>

